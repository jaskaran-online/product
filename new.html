<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cin7orders.com/creatrix_checkout.js"></script>
<script>
  const CONFIG = {
    productLinks: {
      "portable-NIR-sauna-lamp-and-tent":
        "https://creatrixsolutions.company.site/products/#!/~/cart/create=JTdCJTIycHJvZHVjdHMlMjIlM0ElNUIlN0IlMjJpZCUyMiUzQSUyMjY5NjU1MjMxOSUyMiUyQyUyMnF1YW50aXR5JTIyJTNBJTIyMSUyMiUyQyUyMm9wdGlvbnMlMjIlM0ElN0IlN0QlN0QlMkMlN0IlMjJpZCUyMiUzQSUyMjY5NjU1MzI3MyUyMiUyQyUyMnF1YW50aXR5JTIyJTNBJTIyMSUyMiUyQyUyMm9wdGlvbnMlMjIlM0ElN0IlN0QlN0QlNUQlN0Q%3D",
      "home-nir-sauna-hot-yoga":
        "https://creatrixsolutions.company.site/products/#!/~/cart/create=JTdCJTIycHJvZHVjdHMlMjIlM0ElNUIlN0IlMjJpZCUyMiUzQSUyMjY5NjU1MTYxMSUyMiUyQyUyMnF1YW50aXR5JTIyJTNBJTIyMSUyMiUyQyUyMm9wdGlvbnMlMjIlM0ElN0IlN0QlN0QlMkMlN0IlMjJpZCUyMiUzQSUyMjY5NjU1MzI3MyUyMiUyQyUyMnF1YW50aXR5JTIyJTNBJTIyMSUyMiUyQyUyMm9wdGlvbnMlMjIlM0ElN0IlN0QlN0QlNUQlN0Q%3D",
    },
    shippingNotes: {
      1708: {
        note: "<b style='margin-top:10px;background: #f2f2f2;padding: 10px;'>Note: For international shipping, please add either <a href='https://tinyurl.com/TentandLamp120v'>Tent and Lamp (120V)</a> or <a href='https://tinyurl.com/TentandLamp240v'>Tent and Lamp (240V)</a> to your cart to receive a shipping quote.</b>",
        className: "shipping-note-1708",
        selector:
          "#ecwid-products > div > div > div > div:nth-child(1) > div > div:nth-child(2) > div > div.ec-store.ec-store__product-page.ec-store__product-page--696553769.ec-store__product-page--c0.ec-store__product-page--c173270501.ec-store__product-page--c173270755 > div > div > div.product-details.product-details--layout-sidebar-right.product-details--description-basic > div.product-details__sidebar > div.product-details__product-options.details-product-options > div",
      },
    },
  };
  const utils = {
    waitForEcwid: (c, r = 5, d = 500) => {
      typeof Ecwid !== "undefined" && Ecwid.OnAPILoaded
        ? c()
        : r > 0
        ? setTimeout(() => utils.waitForEcwid(c, r - 1, d), d)
        : console.error("Ecwid API unavailable after multiple attempts.");
    },
    addCustomButton: () => {
      const u = window.location.href,
        t = Object.keys(CONFIG.productLinks).find((k) => u.includes(k));
      if (!t) return;
      const p = document.querySelector(".product-details__product-price-row");
      if (p && !document.getElementById("custom-action-button")) {
        const b = document.createElement("button");
        b.innerText = "Add to Cart";
        b.id = "custom-action-button";
        b.style.marginBottom = "10px";
        b.onclick = () => (window.location.href = CONFIG.productLinks[t]);
        p.insertAdjacentElement("afterend", b);
      }
    },
    addShippingNote: () => {
      const c = () => {
        const s = $(".product-details__product-sku").first();
        if (s.length) {
          const k = s
            .text()
            .replace(/SKU\s+/, "")
            .trim();
          if (CONFIG.shippingNotes[k]) {
            const n = CONFIG.shippingNotes[k];
            const t = $(n.selector).first();
            if (t.length && !t.find(`.${n.className}`).length) {
              t.append(
                `<div class="shipping-note ${n.className}">${n.note}</div>`
              );
            }
          }
        } else setTimeout(c, 100);
      };
      c();
    },
  };
  $(document).ready(() => {
    $('.ins-tile[aria-label="Contact Us"]').length > 0 &&
      $("#ec-instantsite").append(
        '<iframe title="Contact Us Form" src="https://form.jotform.com/61743856182563?parentURL=https%3A%2F%2Fcreatrixsolutions.com%2Fcontact-us-for-support-or-questions%2F&amp;jsForm=true" allow="geolocation; microphone; camera; fullscreen" name="61743856182563" id="61743856182563" style="width: 10px; min-width: 100%; display: block; overflow: hidden; height: 1334px; border: medium;" scrolling="no"></iframe>'
      );
    $("body").append("<footer id='ecwid_footer_custom'></footer>");
    $("#tile-footer-MNure7").remove();
    $("#ecwid_footer_custom").load(
      "https://cin7orders.com/ecwid_creatrix_footer.php"
    );
  });
  utils.waitForEcwid(() => {
    Ecwid.OnAPILoaded.add(() => {
      Ecwid.OnPageLoaded.add((p) => {
        p.type === "PRODUCT" &&
          (utils.addCustomButton(),
          utils.addShippingNote(),
          new MutationObserver(utils.addCustomButton).observe(document.body, {
            childList: true,
            subtree: true,
          }));
      });
    });
  });
</script>
